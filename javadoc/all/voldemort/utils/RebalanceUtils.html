<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_15) on Wed Jul 13 19:06:35 PDT 2011 -->
<TITLE>
RebalanceUtils (Voldemort)
</TITLE>

<META NAME="date" CONTENT="2011-07-13">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="RebalanceUtils (Voldemort)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/RebalanceUtils.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../voldemort/utils/Props.html" title="class in voldemort.utils"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../voldemort/utils/ReflectUtils.html" title="class in voldemort.utils"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?voldemort/utils/RebalanceUtils.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="RebalanceUtils.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
voldemort.utils</FONT>
<BR>
Class RebalanceUtils</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../resources/inherit.gif" ALT="extended by "><B>voldemort.utils.RebalanceUtils</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>RebalanceUtils</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
RebalanceUtils provide basic functionality for rebalancing.
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.List&lt;java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#canRebalanceList">canRebalanceList</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#finalClusterFileName">finalClusterFileName</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#initialClusterFileName">initialClusterFileName</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#RebalanceUtils()">RebalanceUtils</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#addPartitionToNode(voldemort.cluster.Node, java.lang.Integer)">addPartitionToNode</A></B>(<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;node,
                   java.lang.Integer&nbsp;donatedPartition)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add a partition to the node provided</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#addPartitionToNode(voldemort.cluster.Node, java.util.Set)">addPartitionToNode</A></B>(<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;node,
                   java.util.Set&lt;java.lang.Integer&gt;&nbsp;donatedPartitions)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add the set of partitions to the node provided</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#checkKeyBelongsToPartition(int, byte[], java.util.HashMap, voldemort.cluster.Cluster, voldemort.store.StoreDefinition)">checkKeyBelongsToPartition</A></B>(int&nbsp;nodeId,
                           byte[]&nbsp;key,
                           java.util.HashMap&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;&nbsp;replicaToPartitionList,
                           <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                           <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDef)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check that the key belongs to one of the partitions in the map of replica
 type to partitions</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#checkKeyBelongsToPartition(java.util.List, java.util.List, java.util.HashMap)">checkKeyBelongsToPartition</A></B>(java.util.List&lt;java.lang.Integer&gt;&nbsp;keyPartitions,
                           java.util.List&lt;java.lang.Integer&gt;&nbsp;nodePartitions,
                           java.util.HashMap&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;&nbsp;replicaToPartitionList)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check that the key belongs to one of the partitions in the map of replica
 type to partitions</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#combinePartitionTuples(java.util.Map, java.util.Map)">combinePartitionTuples</A></B>(java.util.Map&lt;java.lang.Integer,java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&gt;&nbsp;existingPartitionTuples,
                       java.util.Map&lt;java.lang.Integer,java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&gt;&nbsp;newPartitionTuples)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a mapping of existing node ids to their partition tuples and
 another new set of node ids to partition tuples, combines them together
 and puts it into the existing partition tuples</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#containsNode(voldemort.cluster.Cluster, int)">containsNode</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
             int&nbsp;nodeId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a cluster and a node id checks if the node exists</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#containsPreferenceList(voldemort.cluster.Cluster, java.util.List, int)">containsPreferenceList</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                       java.util.List&lt;java.lang.Integer&gt;&nbsp;preferenceList,
                       int&nbsp;nodeId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a preference list and a node id, check if any one of the partitions
 is on the node in picture</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.concurrent.ExecutorService</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#createExecutors(int)">createExecutors</A></B>(int&nbsp;numThreads)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../voldemort/client/protocol/admin/AdminClient.html" title="class in voldemort.client.protocol.admin">AdminClient</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#createTempAdminClient(voldemort.server.VoldemortConfig, voldemort.cluster.Cluster, int)">createTempAdminClient</A></B>(<A HREF="../../voldemort/server/VoldemortConfig.html" title="class in voldemort.server">VoldemortConfig</A>&nbsp;voldemortConfig,
                      <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                      int&nbsp;numConnPerNode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#createUpdatedCluster(voldemort.cluster.Cluster, voldemort.cluster.Node, int)">createUpdatedCluster</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster,
                     <A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;stealerNode,
                     int&nbsp;donatedPartition)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new cluster by adding a donated partition to a new or existing
 node.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#createUpdatedCluster(voldemort.cluster.Cluster, voldemort.cluster.Node, voldemort.cluster.Node, java.util.List)">createUpdatedCluster</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                     <A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;stealerNode,
                     <A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;donorNode,
                     java.util.List&lt;java.lang.Integer&gt;&nbsp;partitionList)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Updates the existing cluster such that we remove partitions mentioned
 from the stealer node and add them to the donor node</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#dumpCluster(voldemort.cluster.Cluster, voldemort.cluster.Cluster, java.io.File)">dumpCluster</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;initialCluster,
            <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;finalCluster,
            java.io.File&nbsp;outputDir)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given the initial and final cluster dumps it into the output directory</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#executorShutDown(java.util.concurrent.ExecutorService, long)">executorShutDown</A></B>(java.util.concurrent.ExecutorService&nbsp;executorService,
                 long&nbsp;timeOutSec)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Wait to shutdown service</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.List&lt;<A HREF="../../voldemort/client/rebalance/RebalancePartitionsInfo.html" title="class in voldemort.client.rebalance">RebalancePartitionsInfo</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#filterPartitionPlanWithStores(java.util.List, java.util.List)">filterPartitionPlanWithStores</A></B>(java.util.List&lt;<A HREF="../../voldemort/client/rebalance/RebalancePartitionsInfo.html" title="class in voldemort.client.rebalance">RebalancePartitionsInfo</A>&gt;&nbsp;existingPlanList,
                              java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefs)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a list of partition plans and a set of stores, copies the store
 names to every individual plan and creates a new list</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#filterStores(java.util.List, boolean)">filterStores</A></B>(java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefs,
             boolean&nbsp;isReadOnly)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a list of store definitions, filters the list depending on the
 boolean</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.List&lt;<A HREF="../../voldemort/client/rebalance/RebalancePartitionsInfo.html" title="class in voldemort.client.rebalance">RebalancePartitionsInfo</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#flattenNodePlans(java.util.List)">flattenNodePlans</A></B>(java.util.List&lt;<A HREF="../../voldemort/client/rebalance/RebalanceNodePlan.html" title="class in voldemort.client.rebalance">RebalanceNodePlan</A>&gt;&nbsp;rebalanceNodePlanList)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a list of node plans flattens it into a list of partitions info</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#flattenPartitionTuples(java.util.HashMap)">flattenPartitionTuples</A></B>(java.util.HashMap&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;&nbsp;replicaToPartitionList)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a map of replica_type to partition mapping gives back a set of
 tuples of [replica_type, partition]</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.HashMap&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#flattenPartitionTuples(java.util.Set)">flattenPartitionTuples</A></B>(java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&nbsp;partitionTuples)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a list of tuples of [replica_type, partition], flattens it and
 generates a map of replica_type to partition mapping</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>,java.lang.Integer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#generateMinCluster(voldemort.cluster.Cluster, voldemort.cluster.Cluster, java.util.List)">generateMinCluster</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster,
                   <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;targetCluster,
                   java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefs)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Takes the current cluster metadata and target cluster metadata ( which
 contains all the nodes of current cluster + new nodes with empty
 partitions ), and generates a new cluster with some partitions moved to
 the new node</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#generateMinCluster(voldemort.cluster.Cluster, voldemort.cluster.Cluster, java.util.List, java.lang.String, int)">generateMinCluster</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster,
                   <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;targetCluster,
                   java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefs,
                   java.lang.String&nbsp;outputDir,
                   int&nbsp;tries)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Outputs an optimized cluster based on the existing cluster and the new
 nodes that are being added.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#getClusterWithNewNodes(voldemort.cluster.Cluster, voldemort.cluster.Cluster)">getClusterWithNewNodes</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster,
                       <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;targetCluster)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given the current cluster and a target cluster, generates a cluster with
 new nodes ( which in turn contain empty partition lists )</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#getCrossZoneMoves(voldemort.cluster.Cluster, voldemort.client.rebalance.RebalanceClusterPlan)">getCrossZoneMoves</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;targetCluster,
                  <A HREF="../../voldemort/client/rebalance/RebalanceClusterPlan.html" title="class in voldemort.client.rebalance">RebalanceClusterPlan</A>&nbsp;plan)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the number of cross zone copying that is going to take place</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.Map&lt;java.lang.Integer,java.lang.Integer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#getCurrentPartitionMapping(voldemort.cluster.Cluster)">getCurrentPartitionMapping</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given the cluster metadata returns a mapping of partition to node</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../voldemort/versioning/Versioned.html" title="class in voldemort.versioning">Versioned</A>&lt;<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#getLatestCluster(java.util.List, voldemort.client.protocol.admin.AdminClient)">getLatestCluster</A></B>(java.util.List&lt;java.lang.Integer&gt;&nbsp;requiredNodes,
                 <A HREF="../../voldemort/client/protocol/admin/AdminClient.html" title="class in voldemort.client.protocol.admin">AdminClient</A>&nbsp;adminClient)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the latest cluster from all available nodes in the cluster<br>
 
 Throws exception if:<br>
 A) Any node in the required nodes list fails to respond.<br>
 B) Cluster is in inconsistent state with concurrent versions for cluster
 metadata on any two nodes.<br></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#getNodeByPartitionId(voldemort.cluster.Cluster, int)">getNodeByPartitionId</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                     int&nbsp;partitionId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the Node associated to the provided partition.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.List&lt;java.lang.Integer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#getNodeIds(java.util.List)">getNodeIds</A></B>(java.util.List&lt;<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&gt;&nbsp;nodes)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a list of nodes, retrieves the list of node ids</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.Map&lt;java.lang.Integer,java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#getNodeIdToAllPartitions(voldemort.cluster.Cluster, voldemort.store.StoreDefinition, boolean)">getNodeIdToAllPartitions</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                         <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDef,
                         boolean&nbsp;includePrimary)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For a particular cluster creates a mapping of node id to their
 corresponding list of [ replicaType, partition ] tuple</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.List&lt;java.lang.Integer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#getPartitionsFromTuples(java.util.Set)">getPartitionsFromTuples</A></B>(java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&nbsp;tuples)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a set of [ replica, partition ] tuples, flatten it to retrieve only
 the partitions</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.Map&lt;java.lang.Integer,java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#getStolenPartitionTuples(voldemort.cluster.Cluster, voldemort.cluster.Cluster, voldemort.store.StoreDefinition)">getStolenPartitionTuples</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster,
                         <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;targetCluster,
                         <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDef)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Find all [replica_type, partition] tuples to be stolen</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.List&lt;java.lang.Integer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#getStolenPrimaryPartitions(voldemort.cluster.Cluster, voldemort.cluster.Cluster, int)">getStolenPrimaryPartitions</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster,
                           <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;targetCluster,
                           int&nbsp;stealNodeId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For a particular stealer node find all the "primary" <replica, partition>
 tuples it will steal.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#getStoreDefinition(voldemort.cluster.Cluster, voldemort.client.protocol.admin.AdminClient)">getStoreDefinition</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                   <A HREF="../../voldemort/client/protocol/admin/AdminClient.html" title="class in voldemort.client.protocol.admin">AdminClient</A>&nbsp;adminClient)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given the cluster metadata and admin client, retrieves the list of store
 definitions.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#getStoreDefinitionWithName(java.util.List, java.lang.String)">getStoreDefinitionWithName</A></B>(java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefs,
                           java.lang.String&nbsp;storeName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a store name and a list of store definitions, returns the
 appropriate store definition ( if it exists )</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.List&lt;java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#getStoreNames(java.util.List)">getStoreNames</A></B>(java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefList)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a list of store definitions return a list of store names</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#getTotalMoves(voldemort.client.rebalance.RebalanceClusterPlan)">getTotalMoves</A></B>(<A HREF="../../voldemort/client/rebalance/RebalanceClusterPlan.html" title="class in voldemort.client.rebalance">RebalanceClusterPlan</A>&nbsp;plan)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the number of total moves</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#printErrorLog(int, org.apache.log4j.Logger, java.lang.String, java.lang.Exception)">printErrorLog</A></B>(int&nbsp;stealerNodeId,
              org.apache.log4j.Logger&nbsp;logger,
              java.lang.String&nbsp;message,
              java.lang.Exception&nbsp;e)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Print log to the following logger ( Error level )</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#printLog(int, org.apache.log4j.Logger, java.lang.String)">printLog</A></B>(int&nbsp;stealerNodeId,
         org.apache.log4j.Logger&nbsp;logger,
         java.lang.String&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Print log to the following logger ( Info level )</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#printMap(java.util.Map)">printMap</A></B>(java.util.Map&lt;java.lang.Integer,java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&gt;&nbsp;nodeIdToAllPartitions)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a string representation of the cluster</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#propagateCluster(voldemort.client.protocol.admin.AdminClient, voldemort.cluster.Cluster)">propagateCluster</A></B>(<A HREF="../../voldemort/client/protocol/admin/AdminClient.html" title="class in voldemort.client.protocol.admin">AdminClient</A>&nbsp;adminClient,
                 <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempt to propagate a cluster definition to all nodes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#removePartitionToNode(voldemort.cluster.Node, java.lang.Integer)">removePartitionToNode</A></B>(<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;node,
                      java.lang.Integer&nbsp;donatedPartition)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove a partition from the node provided</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#removePartitionToNode(voldemort.cluster.Node, java.util.Set)">removePartitionToNode</A></B>(<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;node,
                      java.util.Set&lt;java.lang.Integer&gt;&nbsp;donatedPartitions)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove the set of partitions from the node provided</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#updateCluster(voldemort.cluster.Cluster, java.util.List)">updateCluster</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster,
              java.util.List&lt;<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&gt;&nbsp;updatedNodeList)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Concatenates the list of current nodes in the given cluster with the new
 nodes provided and returns an updated cluster metadata</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#updateNode(voldemort.cluster.Node, java.util.List)">updateNode</A></B>(<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;node,
           java.util.List&lt;java.lang.Integer&gt;&nbsp;partitionsList)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a replica of the node with the new partitions list</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#validateClusterState(voldemort.cluster.Cluster, voldemort.client.protocol.admin.AdminClient)">validateClusterState</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                     <A HREF="../../voldemort/client/protocol/admin/AdminClient.html" title="class in voldemort.client.protocol.admin">AdminClient</A>&nbsp;adminClient)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check the execution state of the server by checking the state of
 <A HREF="../../voldemort/store/metadata/MetadataStore.VoldemortState.html" title="enum in voldemort.store.metadata"><CODE>MetadataStore.VoldemortState</CODE></A> <br>
 
 This function checks if the nodes are all in normal state (
 <A HREF="../../voldemort/store/metadata/MetadataStore.VoldemortState.html#NORMAL_SERVER"><CODE>MetadataStore.VoldemortState.NORMAL_SERVER</CODE></A>).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#validateReadOnlyStores(voldemort.cluster.Cluster, java.util.List, voldemort.client.protocol.admin.AdminClient)">validateReadOnlyStores</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                       java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefs,
                       <A HREF="../../voldemort/client/protocol/admin/AdminClient.html" title="class in voldemort.client.protocol.admin">AdminClient</A>&nbsp;adminClient)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a list of store definitions, cluster and admin client returns a
 boolean indicating if all RO stores are in the correct format.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/utils/RebalanceUtils.html#validateRebalanceStore(java.util.List)">validateRebalanceStore</A></B>(java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefList)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a list of store definitions, makes sure that rebalance supports all
 of them.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="canRebalanceList"><!-- --></A><H3>
canRebalanceList</H3>
<PRE>
public static final java.util.List&lt;java.lang.String&gt; <B>canRebalanceList</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="initialClusterFileName"><!-- --></A><H3>
initialClusterFileName</H3>
<PRE>
public static final java.lang.String <B>initialClusterFileName</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#voldemort.utils.RebalanceUtils.initialClusterFileName">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="finalClusterFileName"><!-- --></A><H3>
finalClusterFileName</H3>
<PRE>
public static final java.lang.String <B>finalClusterFileName</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../constant-values.html#voldemort.utils.RebalanceUtils.finalClusterFileName">Constant Field Values</A></DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="RebalanceUtils()"><!-- --></A><H3>
RebalanceUtils</H3>
<PRE>
public <B>RebalanceUtils</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getLatestCluster(java.util.List, voldemort.client.protocol.admin.AdminClient)"><!-- --></A><H3>
getLatestCluster</H3>
<PRE>
public static <A HREF="../../voldemort/versioning/Versioned.html" title="class in voldemort.versioning">Versioned</A>&lt;<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&gt; <B>getLatestCluster</B>(java.util.List&lt;java.lang.Integer&gt;&nbsp;requiredNodes,
                                                  <A HREF="../../voldemort/client/protocol/admin/AdminClient.html" title="class in voldemort.client.protocol.admin">AdminClient</A>&nbsp;adminClient)</PRE>
<DL>
<DD>Get the latest cluster from all available nodes in the cluster<br>
 
 Throws exception if:<br>
 A) Any node in the required nodes list fails to respond.<br>
 B) Cluster is in inconsistent state with concurrent versions for cluster
 metadata on any two nodes.<br>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>requiredNodes</CODE> - List of nodes from which we definitely need an
        answer<DD><CODE>adminClient</CODE> - Admin client used to query the nodes
<DT><B>Returns:</B><DD>Returns the latest cluster metadata</DL>
</DD>
</DL>
<HR>

<A NAME="checkKeyBelongsToPartition(java.util.List, java.util.List, java.util.HashMap)"><!-- --></A><H3>
checkKeyBelongsToPartition</H3>
<PRE>
public static boolean <B>checkKeyBelongsToPartition</B>(java.util.List&lt;java.lang.Integer&gt;&nbsp;keyPartitions,
                                                 java.util.List&lt;java.lang.Integer&gt;&nbsp;nodePartitions,
                                                 java.util.HashMap&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;&nbsp;replicaToPartitionList)</PRE>
<DL>
<DD>Check that the key belongs to one of the partitions in the map of replica
 type to partitions
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>keyPartitions</CODE> - Preference list of the key<DD><CODE>nodePartitions</CODE> - Partition list on this node<DD><CODE>replicaToPartitionList</CODE> - Mapping of replica type to partition list
<DT><B>Returns:</B><DD>Returns a boolean to indicate if this belongs to the map</DL>
</DD>
</DL>
<HR>

<A NAME="getCrossZoneMoves(voldemort.cluster.Cluster, voldemort.client.rebalance.RebalanceClusterPlan)"><!-- --></A><H3>
getCrossZoneMoves</H3>
<PRE>
public static int <B>getCrossZoneMoves</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;targetCluster,
                                    <A HREF="../../voldemort/client/rebalance/RebalanceClusterPlan.html" title="class in voldemort.client.rebalance">RebalanceClusterPlan</A>&nbsp;plan)</PRE>
<DL>
<DD>Return the number of cross zone copying that is going to take place
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>targetCluster</CODE> - Target cluster metadata<DD><CODE>plan</CODE> - The rebalance plan
<DT><B>Returns:</B><DD>Number of cross zone moves</DL>
</DD>
</DL>
<HR>

<A NAME="getTotalMoves(voldemort.client.rebalance.RebalanceClusterPlan)"><!-- --></A><H3>
getTotalMoves</H3>
<PRE>
public static int <B>getTotalMoves</B>(<A HREF="../../voldemort/client/rebalance/RebalanceClusterPlan.html" title="class in voldemort.client.rebalance">RebalanceClusterPlan</A>&nbsp;plan)</PRE>
<DL>
<DD>Return the number of total moves
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>plan</CODE> - The rebalance plan
<DT><B>Returns:</B><DD>Number of moves</DL>
</DD>
</DL>
<HR>

<A NAME="generateMinCluster(voldemort.cluster.Cluster, voldemort.cluster.Cluster, java.util.List, java.lang.String, int)"><!-- --></A><H3>
generateMinCluster</H3>
<PRE>
public static void <B>generateMinCluster</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster,
                                      <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;targetCluster,
                                      java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefs,
                                      java.lang.String&nbsp;outputDir,
                                      int&nbsp;tries)</PRE>
<DL>
<DD>Outputs an optimized cluster based on the existing cluster and the new
 nodes that are being added.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>currentCluster</CODE> - Current cluster metadata<DD><CODE>targetCluster</CODE> - The target cluster metadata which contains the nodes
        of the current cluster + new nodes with empty partitions<DD><CODE>storeDefs</CODE> - List of store definitions<DD><CODE>outputDir</CODE> - The output directory where we'll store the cluster
        metadata ( if not null )<DD><CODE>tries</CODE> - Number of times we'll try to optimize the metadata
        generation</DL>
</DD>
</DL>
<HR>

<A NAME="generateMinCluster(voldemort.cluster.Cluster, voldemort.cluster.Cluster, java.util.List)"><!-- --></A><H3>
generateMinCluster</H3>
<PRE>
public static <A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>,java.lang.Integer&gt; <B>generateMinCluster</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster,
                                                                 <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;targetCluster,
                                                                 java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefs)</PRE>
<DL>
<DD>Takes the current cluster metadata and target cluster metadata ( which
 contains all the nodes of current cluster + new nodes with empty
 partitions ), and generates a new cluster with some partitions moved to
 the new node
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>currentCluster</CODE> - Current cluster metadata<DD><CODE>targetCluster</CODE> - Target cluster metadata ( which contains old nodes +
        new nodes [ empty partitions ])<DD><CODE>storeDefs</CODE> - List of store definitions
<DT><B>Returns:</B><DD>Return a pair of cluster metadata and number of primary
         partitions that have moved</DL>
</DD>
</DL>
<HR>

<A NAME="checkKeyBelongsToPartition(int, byte[], java.util.HashMap, voldemort.cluster.Cluster, voldemort.store.StoreDefinition)"><!-- --></A><H3>
checkKeyBelongsToPartition</H3>
<PRE>
public static boolean <B>checkKeyBelongsToPartition</B>(int&nbsp;nodeId,
                                                 byte[]&nbsp;key,
                                                 java.util.HashMap&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;&nbsp;replicaToPartitionList,
                                                 <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                                 <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDef)</PRE>
<DL>
<DD>Check that the key belongs to one of the partitions in the map of replica
 type to partitions
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>nodeId</CODE> - Node on which this is running<DD><CODE>key</CODE> - The key to check<DD><CODE>replicaToPartitionList</CODE> - Mapping of replica type to partition list<DD><CODE>cluster</CODE> - Cluster metadata<DD><CODE>storeDef</CODE> - The store definition
<DT><B>Returns:</B><DD>Returns a boolean to indicate if this belongs to the map</DL>
</DD>
</DL>
<HR>

<A NAME="validateClusterState(voldemort.cluster.Cluster, voldemort.client.protocol.admin.AdminClient)"><!-- --></A><H3>
validateClusterState</H3>
<PRE>
public static void <B>validateClusterState</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                        <A HREF="../../voldemort/client/protocol/admin/AdminClient.html" title="class in voldemort.client.protocol.admin">AdminClient</A>&nbsp;adminClient)</PRE>
<DL>
<DD>Check the execution state of the server by checking the state of
 <A HREF="../../voldemort/store/metadata/MetadataStore.VoldemortState.html" title="enum in voldemort.store.metadata"><CODE>MetadataStore.VoldemortState</CODE></A> <br>
 
 This function checks if the nodes are all in normal state (
 <A HREF="../../voldemort/store/metadata/MetadataStore.VoldemortState.html#NORMAL_SERVER"><CODE>MetadataStore.VoldemortState.NORMAL_SERVER</CODE></A>).
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>cluster</CODE> - Cluster metadata whose nodes we are checking<DD><CODE>adminClient</CODE> - Admin client used to query
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../voldemort/server/rebalance/VoldemortRebalancingException.html" title="class in voldemort.server.rebalance">VoldemortRebalancingException</A></CODE> - if any node is not in normal state</DL>
</DD>
</DL>
<HR>

<A NAME="getClusterWithNewNodes(voldemort.cluster.Cluster, voldemort.cluster.Cluster)"><!-- --></A><H3>
getClusterWithNewNodes</H3>
<PRE>
public static <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A> <B>getClusterWithNewNodes</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster,
                                             <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;targetCluster)</PRE>
<DL>
<DD>Given the current cluster and a target cluster, generates a cluster with
 new nodes ( which in turn contain empty partition lists )
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>currentCluster</CODE> - Current cluster metadata<DD><CODE>targetCluster</CODE> - Target cluster metadata
<DT><B>Returns:</B><DD>Returns a new cluster which contains nodes of the current cluster
         + new nodes</DL>
</DD>
</DL>
<HR>

<A NAME="updateCluster(voldemort.cluster.Cluster, java.util.List)"><!-- --></A><H3>
updateCluster</H3>
<PRE>
public static <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A> <B>updateCluster</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster,
                                    java.util.List&lt;<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&gt;&nbsp;updatedNodeList)</PRE>
<DL>
<DD>Concatenates the list of current nodes in the given cluster with the new
 nodes provided and returns an updated cluster metadata
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>currentCluster</CODE> - The current cluster metadata<DD><CODE>updatedNodeList</CODE> - The list of new nodes to be added
<DT><B>Returns:</B><DD>New cluster metadata containing both the sets of nodes</DL>
</DD>
</DL>
<HR>

<A NAME="containsNode(voldemort.cluster.Cluster, int)"><!-- --></A><H3>
containsNode</H3>
<PRE>
public static boolean <B>containsNode</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                   int&nbsp;nodeId)</PRE>
<DL>
<DD>Given a cluster and a node id checks if the node exists
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>cluster</CODE> - The cluster metadata to check in<DD><CODE>nodeId</CODE> - The node id to search for
<DT><B>Returns:</B><DD>True if cluster contains the node id, else false</DL>
</DD>
</DL>
<HR>

<A NAME="containsPreferenceList(voldemort.cluster.Cluster, java.util.List, int)"><!-- --></A><H3>
containsPreferenceList</H3>
<PRE>
public static boolean <B>containsPreferenceList</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                             java.util.List&lt;java.lang.Integer&gt;&nbsp;preferenceList,
                                             int&nbsp;nodeId)</PRE>
<DL>
<DD>Given a preference list and a node id, check if any one of the partitions
 is on the node in picture
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>cluster</CODE> - Cluster metadata<DD><CODE>preferenceList</CODE> - Preference list of partition ids<DD><CODE>nodeId</CODE> - Node id which we are checking for
<DT><B>Returns:</B><DD>True if the preference list contains a node whose id = nodeId</DL>
</DD>
</DL>
<HR>

<A NAME="createUpdatedCluster(voldemort.cluster.Cluster, voldemort.cluster.Node, voldemort.cluster.Node, java.util.List)"><!-- --></A><H3>
createUpdatedCluster</H3>
<PRE>
public static <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A> <B>createUpdatedCluster</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                           <A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;stealerNode,
                                           <A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;donorNode,
                                           java.util.List&lt;java.lang.Integer&gt;&nbsp;partitionList)</PRE>
<DL>
<DD>Updates the existing cluster such that we remove partitions mentioned
 from the stealer node and add them to the donor node
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>cluster</CODE> - Existing cluster metadata<DD><CODE>stealerNode</CODE> - Node from which we are stealing the partitions<DD><CODE>donorNode</CODE> - Node to which we are donating<DD><CODE>partitionList</CODE> - List of partitions we are moving
<DT><B>Returns:</B><DD>Updated cluster metadata</DL>
</DD>
</DL>
<HR>

<A NAME="createUpdatedCluster(voldemort.cluster.Cluster, voldemort.cluster.Node, int)"><!-- --></A><H3>
createUpdatedCluster</H3>
<PRE>
public static <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A> <B>createUpdatedCluster</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster,
                                           <A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;stealerNode,
                                           int&nbsp;donatedPartition)</PRE>
<DL>
<DD>Creates a new cluster by adding a donated partition to a new or existing
 node.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>currentCluster</CODE> - current cluster used to copy from.<DD><CODE>stealerNode</CODE> - now or existing node being updated.<DD><CODE>donatedPartition</CODE> - partition donated to the <code>stealerNode</code></DL>
</DD>
</DL>
<HR>

<A NAME="updateNode(voldemort.cluster.Node, java.util.List)"><!-- --></A><H3>
updateNode</H3>
<PRE>
public static <A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A> <B>updateNode</B>(<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;node,
                              java.util.List&lt;java.lang.Integer&gt;&nbsp;partitionsList)</PRE>
<DL>
<DD>Creates a replica of the node with the new partitions list
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>node</CODE> - The node whose replica we are creating<DD><CODE>partitionsList</CODE> - The new partitions list
<DT><B>Returns:</B><DD>Replica of node with new partitions list</DL>
</DD>
</DL>
<HR>

<A NAME="addPartitionToNode(voldemort.cluster.Node, java.lang.Integer)"><!-- --></A><H3>
addPartitionToNode</H3>
<PRE>
public static <A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A> <B>addPartitionToNode</B>(<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;node,
                                      java.lang.Integer&nbsp;donatedPartition)</PRE>
<DL>
<DD>Add a partition to the node provided
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>node</CODE> - The node to which we'll add the partition<DD><CODE>donatedPartition</CODE> - The partition to add
<DT><B>Returns:</B><DD>The new node with the new partition</DL>
</DD>
</DL>
<HR>

<A NAME="removePartitionToNode(voldemort.cluster.Node, java.lang.Integer)"><!-- --></A><H3>
removePartitionToNode</H3>
<PRE>
public static <A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A> <B>removePartitionToNode</B>(<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;node,
                                         java.lang.Integer&nbsp;donatedPartition)</PRE>
<DL>
<DD>Remove a partition from the node provided
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>node</CODE> - The node from which we're removing the partition<DD><CODE>donatedPartition</CODE> - The partitions to remove
<DT><B>Returns:</B><DD>The new node without the partition</DL>
</DD>
</DL>
<HR>

<A NAME="addPartitionToNode(voldemort.cluster.Node, java.util.Set)"><!-- --></A><H3>
addPartitionToNode</H3>
<PRE>
public static <A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A> <B>addPartitionToNode</B>(<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;node,
                                      java.util.Set&lt;java.lang.Integer&gt;&nbsp;donatedPartitions)</PRE>
<DL>
<DD>Add the set of partitions to the node provided
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>node</CODE> - The node to which we'll add the partitions<DD><CODE>donatedPartitions</CODE> - The list of partitions to add
<DT><B>Returns:</B><DD>The new node with the new partitions</DL>
</DD>
</DL>
<HR>

<A NAME="removePartitionToNode(voldemort.cluster.Node, java.util.Set)"><!-- --></A><H3>
removePartitionToNode</H3>
<PRE>
public static <A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A> <B>removePartitionToNode</B>(<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&nbsp;node,
                                         java.util.Set&lt;java.lang.Integer&gt;&nbsp;donatedPartitions)</PRE>
<DL>
<DD>Remove the set of partitions from the node provided
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>node</CODE> - The node from which we're removing the partitions<DD><CODE>donatedPartitions</CODE> - The list of partitions to remove
<DT><B>Returns:</B><DD>The new node without the partitions</DL>
</DD>
</DL>
<HR>

<A NAME="getCurrentPartitionMapping(voldemort.cluster.Cluster)"><!-- --></A><H3>
getCurrentPartitionMapping</H3>
<PRE>
public static java.util.Map&lt;java.lang.Integer,java.lang.Integer&gt; <B>getCurrentPartitionMapping</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster)</PRE>
<DL>
<DD>Given the cluster metadata returns a mapping of partition to node
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>currentCluster</CODE> - Cluster metadata
<DT><B>Returns:</B><DD>Map of partition id to node id</DL>
</DD>
</DL>
<HR>

<A NAME="propagateCluster(voldemort.client.protocol.admin.AdminClient, voldemort.cluster.Cluster)"><!-- --></A><H3>
propagateCluster</H3>
<PRE>
public static void <B>propagateCluster</B>(<A HREF="../../voldemort/client/protocol/admin/AdminClient.html" title="class in voldemort.client.protocol.admin">AdminClient</A>&nbsp;adminClient,
                                    <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster)</PRE>
<DL>
<DD>Attempt to propagate a cluster definition to all nodes. Also rollback is
 in place in case one of them fails
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>adminClient</CODE> - <A HREF="../../voldemort/client/protocol/admin/AdminClient.html" title="class in voldemort.client.protocol.admin"><CODE>AdminClient</CODE></A>
        instance to use.<DD><CODE>cluster</CODE> - Cluster definition to propagate</DL>
</DD>
</DL>
<HR>

<A NAME="getStolenPrimaryPartitions(voldemort.cluster.Cluster, voldemort.cluster.Cluster, int)"><!-- --></A><H3>
getStolenPrimaryPartitions</H3>
<PRE>
public static java.util.List&lt;java.lang.Integer&gt; <B>getStolenPrimaryPartitions</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster,
                                                                           <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;targetCluster,
                                                                           int&nbsp;stealNodeId)</PRE>
<DL>
<DD>For a particular stealer node find all the "primary" <replica, partition>
 tuples it will steal. In other words, expect the "replica" part to be 0
 always.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>currentCluster</CODE> - The cluster definition of the existing cluster<DD><CODE>targetCluster</CODE> - The target cluster definition<DD><CODE>stealNodeId</CODE> - Node id of the stealer node
<DT><B>Returns:</B><DD>Returns a list of primary partitions which this stealer node will
         get</DL>
</DD>
</DL>
<HR>

<A NAME="getStolenPartitionTuples(voldemort.cluster.Cluster, voldemort.cluster.Cluster, voldemort.store.StoreDefinition)"><!-- --></A><H3>
getStolenPartitionTuples</H3>
<PRE>
public static java.util.Map&lt;java.lang.Integer,java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&gt; <B>getStolenPartitionTuples</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;currentCluster,
                                                                                                                                 <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;targetCluster,
                                                                                                                                 <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDef)</PRE>
<DL>
<DD>Find all [replica_type, partition] tuples to be stolen
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>currentCluster</CODE> - Current cluster metadata<DD><CODE>targetCluster</CODE> - Target cluster metadata<DD><CODE>storeDef</CODE> - Store Definition
<DT><B>Returns:</B><DD>Map of stealer node id to sets of [ replica_type, partition ]
         tuples</DL>
</DD>
</DL>
<HR>

<A NAME="combinePartitionTuples(java.util.Map, java.util.Map)"><!-- --></A><H3>
combinePartitionTuples</H3>
<PRE>
public static void <B>combinePartitionTuples</B>(java.util.Map&lt;java.lang.Integer,java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&gt;&nbsp;existingPartitionTuples,
                                          java.util.Map&lt;java.lang.Integer,java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&gt;&nbsp;newPartitionTuples)</PRE>
<DL>
<DD>Given a mapping of existing node ids to their partition tuples and
 another new set of node ids to partition tuples, combines them together
 and puts it into the existing partition tuples
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>existingPartitionTuples</CODE> - Existing partition tuples ( Will include
        the new partition tuples at the end of this function )<DD><CODE>newPartitionTuples</CODE> - New partition tuples</DL>
</DD>
</DL>
<HR>

<A NAME="getNodeIdToAllPartitions(voldemort.cluster.Cluster, voldemort.store.StoreDefinition, boolean)"><!-- --></A><H3>
getNodeIdToAllPartitions</H3>
<PRE>
public static java.util.Map&lt;java.lang.Integer,java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&gt; <B>getNodeIdToAllPartitions</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                                                                                                                 <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDef,
                                                                                                                                 boolean&nbsp;includePrimary)</PRE>
<DL>
<DD>For a particular cluster creates a mapping of node id to their
 corresponding list of [ replicaType, partition ] tuple
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>cluster</CODE> - The cluster metadata<DD><CODE>storeDef</CODE> - The store definition<DD><CODE>includePrimary</CODE> - Include the primary partition?
<DT><B>Returns:</B><DD>Map of node id to set of [ replicaType, partition ] tuple</DL>
</DD>
</DL>
<HR>

<A NAME="dumpCluster(voldemort.cluster.Cluster, voldemort.cluster.Cluster, java.io.File)"><!-- --></A><H3>
dumpCluster</H3>
<PRE>
public static void <B>dumpCluster</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;initialCluster,
                               <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;finalCluster,
                               java.io.File&nbsp;outputDir)</PRE>
<DL>
<DD>Given the initial and final cluster dumps it into the output directory
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>initialCluster</CODE> - Initial cluster metadata<DD><CODE>finalCluster</CODE> - Final cluster metadata<DD><CODE>outputDir</CODE> - Output directory where to dump this file
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="printLog(int, org.apache.log4j.Logger, java.lang.String)"><!-- --></A><H3>
printLog</H3>
<PRE>
public static void <B>printLog</B>(int&nbsp;stealerNodeId,
                            org.apache.log4j.Logger&nbsp;logger,
                            java.lang.String&nbsp;message)</PRE>
<DL>
<DD>Print log to the following logger ( Info level )
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>stealerNodeId</CODE> - Stealer node id<DD><CODE>logger</CODE> - Logger class<DD><CODE>message</CODE> - The message to print</DL>
</DD>
</DL>
<HR>

<A NAME="printErrorLog(int, org.apache.log4j.Logger, java.lang.String, java.lang.Exception)"><!-- --></A><H3>
printErrorLog</H3>
<PRE>
public static void <B>printErrorLog</B>(int&nbsp;stealerNodeId,
                                 org.apache.log4j.Logger&nbsp;logger,
                                 java.lang.String&nbsp;message,
                                 java.lang.Exception&nbsp;e)</PRE>
<DL>
<DD>Print log to the following logger ( Error level )
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>stealerNodeId</CODE> - Stealer node id<DD><CODE>logger</CODE> - Logger class<DD><CODE>message</CODE> - The message to print</DL>
</DD>
</DL>
<HR>

<A NAME="getNodeByPartitionId(voldemort.cluster.Cluster, int)"><!-- --></A><H3>
getNodeByPartitionId</H3>
<PRE>
public static <A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A> <B>getNodeByPartitionId</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                        int&nbsp;partitionId)</PRE>
<DL>
<DD>Returns the Node associated to the provided partition.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>cluster</CODE> - The cluster in which to find the node<DD><CODE>partitionId</CODE> - Partition id for which we want the corresponding node
<DT><B>Returns:</B><DD>Node that owns the partition</DL>
</DD>
</DL>
<HR>

<A NAME="createTempAdminClient(voldemort.server.VoldemortConfig, voldemort.cluster.Cluster, int)"><!-- --></A><H3>
createTempAdminClient</H3>
<PRE>
public static <A HREF="../../voldemort/client/protocol/admin/AdminClient.html" title="class in voldemort.client.protocol.admin">AdminClient</A> <B>createTempAdminClient</B>(<A HREF="../../voldemort/server/VoldemortConfig.html" title="class in voldemort.server">VoldemortConfig</A>&nbsp;voldemortConfig,
                                                <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                                int&nbsp;numConnPerNode)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getStoreDefinition(voldemort.cluster.Cluster, voldemort.client.protocol.admin.AdminClient)"><!-- --></A><H3>
getStoreDefinition</H3>
<PRE>
public static java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt; <B>getStoreDefinition</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                                                 <A HREF="../../voldemort/client/protocol/admin/AdminClient.html" title="class in voldemort.client.protocol.admin">AdminClient</A>&nbsp;adminClient)</PRE>
<DL>
<DD>Given the cluster metadata and admin client, retrieves the list of store
 definitions.
 
 <br>
 
 It also checks if the store definitions are consistent across the cluster
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>cluster</CODE> - The cluster metadata<DD><CODE>adminClient</CODE> - The admin client to use to retrieve the store
        definitions
<DT><B>Returns:</B><DD>List of store definitions</DL>
</DD>
</DL>
<HR>

<A NAME="validateRebalanceStore(java.util.List)"><!-- --></A><H3>
validateRebalanceStore</H3>
<PRE>
public static java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt; <B>validateRebalanceStore</B>(java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefList)</PRE>
<DL>
<DD>Given a list of store definitions, makes sure that rebalance supports all
 of them. If not it throws an error.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>storeDefList</CODE> - List of store definitions
<DT><B>Returns:</B><DD>Filtered list of store definitions which rebalancing supports</DL>
</DD>
</DL>
<HR>

<A NAME="validateReadOnlyStores(voldemort.cluster.Cluster, java.util.List, voldemort.client.protocol.admin.AdminClient)"><!-- --></A><H3>
validateReadOnlyStores</H3>
<PRE>
public static void <B>validateReadOnlyStores</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                          java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefs,
                                          <A HREF="../../voldemort/client/protocol/admin/AdminClient.html" title="class in voldemort.client.protocol.admin">AdminClient</A>&nbsp;adminClient)</PRE>
<DL>
<DD>Given a list of store definitions, cluster and admin client returns a
 boolean indicating if all RO stores are in the correct format.
 
 <br>
 
 This function also takes into consideration nodes which are being
 bootstrapped for the first time, in which case we can safely ignore
 checking them ( as they will have default to ro0 )
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>cluster</CODE> - Cluster metadata<DD><CODE>storeDefs</CODE> - Complete list of store definitions<DD><CODE>adminClient</CODE> - Admin client</DL>
</DD>
</DL>
<HR>

<A NAME="printMap(java.util.Map)"><!-- --></A><H3>
printMap</H3>
<PRE>
public static java.lang.String <B>printMap</B>(java.util.Map&lt;java.lang.Integer,java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&gt;&nbsp;nodeIdToAllPartitions)</PRE>
<DL>
<DD>Returns a string representation of the cluster
 
 <pre>
 Current Cluster:
 0 - [0, 1, 2, 3] + [7, 8, 9]
 1 - [4, 5, 6] + [0, 1, 2, 3]
 2 - [7, 8, 9] + [4, 5, 6]
 </pre>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>nodeIdToAllPartitions</CODE> - Mapping of node id to all tuples
<DT><B>Returns:</B><DD>Returns a string representation of the cluster</DL>
</DD>
</DL>
<HR>

<A NAME="flattenPartitionTuples(java.util.Set)"><!-- --></A><H3>
flattenPartitionTuples</H3>
<PRE>
public static java.util.HashMap&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt; <B>flattenPartitionTuples</B>(java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&nbsp;partitionTuples)</PRE>
<DL>
<DD>Given a list of tuples of [replica_type, partition], flattens it and
 generates a map of replica_type to partition mapping
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>partitionTuples</CODE> - Set of <replica_type, partition> tuples
<DT><B>Returns:</B><DD>Map of replica_type to set of partitions</DL>
</DD>
</DL>
<HR>

<A NAME="flattenPartitionTuples(java.util.HashMap)"><!-- --></A><H3>
flattenPartitionTuples</H3>
<PRE>
public static java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt; <B>flattenPartitionTuples</B>(java.util.HashMap&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;&nbsp;replicaToPartitionList)</PRE>
<DL>
<DD>Given a map of replica_type to partition mapping gives back a set of
 tuples of [replica_type, partition]
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>replicaToPartitionList</CODE> - Map of replica_type to set of partitions
<DT><B>Returns:</B><DD>Set of <replica_type, partition> tuples</DL>
</DD>
</DL>
<HR>

<A NAME="flattenNodePlans(java.util.List)"><!-- --></A><H3>
flattenNodePlans</H3>
<PRE>
public static java.util.List&lt;<A HREF="../../voldemort/client/rebalance/RebalancePartitionsInfo.html" title="class in voldemort.client.rebalance">RebalancePartitionsInfo</A>&gt; <B>flattenNodePlans</B>(java.util.List&lt;<A HREF="../../voldemort/client/rebalance/RebalanceNodePlan.html" title="class in voldemort.client.rebalance">RebalanceNodePlan</A>&gt;&nbsp;rebalanceNodePlanList)</PRE>
<DL>
<DD>Given a list of node plans flattens it into a list of partitions info
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>rebalanceNodePlanList</CODE> - Complete list of rebalance node plan
<DT><B>Returns:</B><DD>Flattened list of partition plans</DL>
</DD>
</DL>
<HR>

<A NAME="getPartitionsFromTuples(java.util.Set)"><!-- --></A><H3>
getPartitionsFromTuples</H3>
<PRE>
public static java.util.List&lt;java.lang.Integer&gt; <B>getPartitionsFromTuples</B>(java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.lang.Integer&gt;&gt;&nbsp;tuples)</PRE>
<DL>
<DD>Given a set of [ replica, partition ] tuples, flatten it to retrieve only
 the partitions
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tuples</CODE> - The [ replica, partition ] tuples
<DT><B>Returns:</B><DD>List of partitions</DL>
</DD>
</DL>
<HR>

<A NAME="filterPartitionPlanWithStores(java.util.List, java.util.List)"><!-- --></A><H3>
filterPartitionPlanWithStores</H3>
<PRE>
public static java.util.List&lt;<A HREF="../../voldemort/client/rebalance/RebalancePartitionsInfo.html" title="class in voldemort.client.rebalance">RebalancePartitionsInfo</A>&gt; <B>filterPartitionPlanWithStores</B>(java.util.List&lt;<A HREF="../../voldemort/client/rebalance/RebalancePartitionsInfo.html" title="class in voldemort.client.rebalance">RebalancePartitionsInfo</A>&gt;&nbsp;existingPlanList,
                                                                                    java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefs)</PRE>
<DL>
<DD>Given a list of partition plans and a set of stores, copies the store
 names to every individual plan and creates a new list
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>existingPlanList</CODE> - Existing partition plan list<DD><CODE>storeDefs</CODE> - List of store names we are rebalancing
<DT><B>Returns:</B><DD>List of updated partition plan</DL>
</DD>
</DL>
<HR>

<A NAME="getStoreDefinitionWithName(java.util.List, java.lang.String)"><!-- --></A><H3>
getStoreDefinitionWithName</H3>
<PRE>
public static <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A> <B>getStoreDefinitionWithName</B>(java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefs,
                                                         java.lang.String&nbsp;storeName)</PRE>
<DL>
<DD>Given a store name and a list of store definitions, returns the
 appropriate store definition ( if it exists )
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>storeDefs</CODE> - List of store definitions<DD><CODE>storeName</CODE> - The store name whose store definition is required
<DT><B>Returns:</B><DD>The store definition</DL>
</DD>
</DL>
<HR>

<A NAME="filterStores(java.util.List, boolean)"><!-- --></A><H3>
filterStores</H3>
<PRE>
public static java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt; <B>filterStores</B>(java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefs,
                                                           boolean&nbsp;isReadOnly)</PRE>
<DL>
<DD>Given a list of store definitions, filters the list depending on the
 boolean
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>storeDefs</CODE> - Complete list of store definitions<DD><CODE>isReadOnly</CODE> - Boolean indicating whether filter on read-only or not?
<DT><B>Returns:</B><DD>List of filtered store definition</DL>
</DD>
</DL>
<HR>

<A NAME="getStoreNames(java.util.List)"><!-- --></A><H3>
getStoreNames</H3>
<PRE>
public static java.util.List&lt;java.lang.String&gt; <B>getStoreNames</B>(java.util.List&lt;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefList)</PRE>
<DL>
<DD>Given a list of store definitions return a list of store names
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>storeDefList</CODE> - The list of store definitions
<DT><B>Returns:</B><DD>Returns a list of store names</DL>
</DD>
</DL>
<HR>

<A NAME="getNodeIds(java.util.List)"><!-- --></A><H3>
getNodeIds</H3>
<PRE>
public static java.util.List&lt;java.lang.Integer&gt; <B>getNodeIds</B>(java.util.List&lt;<A HREF="../../voldemort/cluster/Node.html" title="class in voldemort.cluster">Node</A>&gt;&nbsp;nodes)</PRE>
<DL>
<DD>Given a list of nodes, retrieves the list of node ids
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>nodes</CODE> - The list of nodes
<DT><B>Returns:</B><DD>Returns a list of node ids</DL>
</DD>
</DL>
<HR>

<A NAME="executorShutDown(java.util.concurrent.ExecutorService, long)"><!-- --></A><H3>
executorShutDown</H3>
<PRE>
public static void <B>executorShutDown</B>(java.util.concurrent.ExecutorService&nbsp;executorService,
                                    long&nbsp;timeOutSec)</PRE>
<DL>
<DD>Wait to shutdown service
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>executorService</CODE> - Executor service to shutdown<DD><CODE>timeOutSec</CODE> - Time we wait for</DL>
</DD>
</DL>
<HR>

<A NAME="createExecutors(int)"><!-- --></A><H3>
createExecutors</H3>
<PRE>
public static java.util.concurrent.ExecutorService <B>createExecutors</B>(int&nbsp;numThreads)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/RebalanceUtils.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../voldemort/utils/Props.html" title="class in voldemort.utils"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../voldemort/utils/ReflectUtils.html" title="class in voldemort.utils"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?voldemort/utils/RebalanceUtils.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="RebalanceUtils.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Jay Kreps, Roshan Sumbaly, Alex Feinberg, Bhupesh Bansal, Lei Gao
</BODY>
</HTML>
