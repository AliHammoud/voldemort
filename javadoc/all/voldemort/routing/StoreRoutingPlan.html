<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_27) on Tue Sep 23 17:25:03 PDT 2014 -->
<TITLE>
StoreRoutingPlan (Voldemort)
</TITLE>

<META NAME="date" CONTENT="2014-09-23">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="StoreRoutingPlan (Voldemort)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/StoreRoutingPlan.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../voldemort/routing/RoutingStrategyType.html" title="class in voldemort.routing"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../voldemort/routing/ZoneRoutingStrategy.html" title="class in voldemort.routing"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?voldemort/routing/StoreRoutingPlan.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="StoreRoutingPlan.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
voldemort.routing</FONT>
<BR>
Class StoreRoutingPlan</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../resources/inherit.gif" ALT="extended by "><B>voldemort.routing.StoreRoutingPlan</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>StoreRoutingPlan</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
This class wraps up a Cluster object and a StoreDefinition. The methods are
 effectively helper or util style methods for querying the routing plan that
 will be generated for a given routing strategy upon store and cluster
 topology information.
 
 This object can be expensive to construct. Invocations of getters should be
 O(1) if possible. Lazy initialization of cached values is ideal...
 
 The intermingling of key-based interfaces and partition-based interfaces is
 ugly in this class. Partition-based interfaces should be in an underlying
 class and then key-based interfaces should wrap those up. Or, all of these
 types of class should implement the getMasterPartition(byte[]) interface from
 RoutingStrategy. Then the caller always does translation from key to
 partition ID, and the *StoreRouting* classes only offer partition-based
 interfaces.
<P>

<P>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#StoreRoutingPlan(voldemort.cluster.Cluster, voldemort.store.StoreDefinition)">StoreRoutingPlan</A></B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                 <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDefinition)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#checkKeyBelongsToNode(byte[], int)">checkKeyBelongsToNode</A></B>(byte[]&nbsp;key,
                      int&nbsp;nodeId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines if the key replicates to the given node</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#checkKeyBelongsToNode(byte[], int, voldemort.cluster.Cluster, voldemort.store.StoreDefinition)">checkKeyBelongsToNode</A></B>(byte[]&nbsp;key,
                      int&nbsp;nodeId,
                      <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                      <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDef)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.List&lt;java.lang.Integer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#checkKeyBelongsToPartition(byte[], java.util.Set, voldemort.cluster.Cluster, voldemort.store.StoreDefinition)">checkKeyBelongsToPartition</A></B>(byte[]&nbsp;key,
                           java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.util.HashMap&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;&gt;&gt;&nbsp;stealerNodeToMappingTuples,
                           <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                           <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDef)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a key and a list of steal infos give back a list of stealer node
 ids which will steal this.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#checkKeyBelongsToPartition(int, byte[], java.util.HashMap, voldemort.cluster.Cluster, voldemort.store.StoreDefinition)">checkKeyBelongsToPartition</A></B>(int&nbsp;nodeId,
                           byte[]&nbsp;key,
                           java.util.HashMap&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;&nbsp;replicaToPartitionList,
                           <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                           <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDef)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check that the key belongs to one of the partitions in the map of replica
 type to partitions</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#checkKeyBelongsToPartition(java.util.List, java.util.List, java.util.HashMap)">checkKeyBelongsToPartition</A></B>(java.util.List&lt;java.lang.Integer&gt;&nbsp;keyPartitions,
                           java.util.List&lt;java.lang.Integer&gt;&nbsp;nodePartitions,
                           java.util.HashMap&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;&nbsp;replicaToPartitionList)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check that the key belongs to one of the partitions in the map of replica
 type to partitions</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#checkPartitionBelongsToNode(int, int, voldemort.cluster.Cluster, voldemort.store.StoreDefinition)">checkPartitionBelongsToNode</A></B>(int&nbsp;partition,
                            int&nbsp;nodeId,
                            <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                            <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDef)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks if a given partition is stored in the node.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#getCluster()">getCluster</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#getMasterPartitionId(byte[])">getMasterPartitionId</A></B>(byte[]&nbsp;key)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines master partition ID for the key.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#getNodeIdForPartitionId(int)">getNodeIdForPartitionId</A></B>(int&nbsp;partitionId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines node ID that hosts the specified partition ID.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#getNodeIdForZoneNary(int, int, int)">getNodeIdForZoneNary</A></B>(int&nbsp;zoneId,
                     int&nbsp;zoneNary,
                     int&nbsp;partitionId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines which node hosts partition id with specified n-ary level in
 specified zone.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.Integer</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#getNodesPartitionIdForKey(int, byte[])">getNodesPartitionIdForKey</A></B>(int&nbsp;nodeId,
                          byte[]&nbsp;key)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines the partition ID that replicates the key on the given node.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;java.lang.Integer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#getReplicatingPartitionList(byte[])">getReplicatingPartitionList</A></B>(byte[]&nbsp;key)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines list of partition IDs that replicate the key.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;java.lang.Integer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#getReplicatingPartitionList(int)">getReplicatingPartitionList</A></B>(int&nbsp;masterPartitionId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines list of partition IDs that replicate the master partition ID.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;java.lang.Integer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#getReplicationNodeList(int)">getReplicationNodeList</A></B>(int&nbsp;partitionId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the list of node ids this partition replicates to.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#getStoreDefinition()">getStoreDefinition</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#getZoneNaryForNodesPartition(int, int, int)">getZoneNaryForNodesPartition</A></B>(int&nbsp;zoneId,
                             int&nbsp;nodeId,
                             int&nbsp;partitionId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines the zone n-ary replica level of the specified partitionId on
 the node id in zone id.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;java.lang.Integer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#getZoneNAryPartitionIds(int)">getZoneNAryPartitionIds</A></B>(int&nbsp;nodeId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns all (zone n-ary) partition IDs hosted on the node.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;java.lang.Integer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#getZonePrimaryPartitionIds(int)">getZonePrimaryPartitionIds</A></B>(int&nbsp;nodeId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns all zone-primary partition IDs on node.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../voldemort/routing/StoreRoutingPlan.html#zoneNAryExists(int, int, int)">zoneNAryExists</A></B>(int&nbsp;zoneId,
               int&nbsp;zoneNAry,
               int&nbsp;partitionId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checks if zone has a zone n-ary for partition Id.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="StoreRoutingPlan(voldemort.cluster.Cluster, voldemort.store.StoreDefinition)"><!-- --></A><H3>
StoreRoutingPlan</H3>
<PRE>
public <B>StoreRoutingPlan</B>(<A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                        <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDefinition)</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getCluster()"><!-- --></A><H3>
getCluster</H3>
<PRE>
public <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A> <B>getCluster</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getStoreDefinition()"><!-- --></A><H3>
getStoreDefinition</H3>
<PRE>
public <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A> <B>getStoreDefinition</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getReplicatingPartitionList(int)"><!-- --></A><H3>
getReplicatingPartitionList</H3>
<PRE>
public java.util.List&lt;java.lang.Integer&gt; <B>getReplicatingPartitionList</B>(int&nbsp;masterPartitionId)</PRE>
<DL>
<DD>Determines list of partition IDs that replicate the master partition ID.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>masterPartitionId</CODE> - 
<DT><B>Returns:</B><DD>List of partition IDs that replicate the master partition ID.</DL>
</DD>
</DL>
<HR>

<A NAME="getReplicatingPartitionList(byte[])"><!-- --></A><H3>
getReplicatingPartitionList</H3>
<PRE>
public java.util.List&lt;java.lang.Integer&gt; <B>getReplicatingPartitionList</B>(byte[]&nbsp;key)</PRE>
<DL>
<DD>Determines list of partition IDs that replicate the key.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - 
<DT><B>Returns:</B><DD>List of partition IDs that replicate the given key</DL>
</DD>
</DL>
<HR>

<A NAME="getMasterPartitionId(byte[])"><!-- --></A><H3>
getMasterPartitionId</H3>
<PRE>
public int <B>getMasterPartitionId</B>(byte[]&nbsp;key)</PRE>
<DL>
<DD>Determines master partition ID for the key.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - 
<DT><B>Returns:</B><DD>master partition id</DL>
</DD>
</DL>
<HR>

<A NAME="getNodeIdForPartitionId(int)"><!-- --></A><H3>
getNodeIdForPartitionId</H3>
<PRE>
public int <B>getNodeIdForPartitionId</B>(int&nbsp;partitionId)</PRE>
<DL>
<DD>Determines node ID that hosts the specified partition ID.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>partitionId</CODE> - 
<DT><B>Returns:</B><DD>node id that hosts primary partition id.</DL>
</DD>
</DL>
<HR>

<A NAME="getNodesPartitionIdForKey(int, byte[])"><!-- --></A><H3>
getNodesPartitionIdForKey</H3>
<PRE>
public java.lang.Integer <B>getNodesPartitionIdForKey</B>(int&nbsp;nodeId,
                                                   byte[]&nbsp;key)</PRE>
<DL>
<DD>Determines the partition ID that replicates the key on the given node.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>nodeId</CODE> - of the node<DD><CODE>key</CODE> - to look up.
<DT><B>Returns:</B><DD>partitionId if found, otherwise null.</DL>
</DD>
</DL>
<HR>

<A NAME="getReplicationNodeList(int)"><!-- --></A><H3>
getReplicationNodeList</H3>
<PRE>
public java.util.List&lt;java.lang.Integer&gt; <B>getReplicationNodeList</B>(int&nbsp;partitionId)
                                                         throws <A HREF="../../voldemort/VoldemortException.html" title="class in voldemort">VoldemortException</A></PRE>
<DL>
<DD>Returns the list of node ids this partition replicates to.
 
 TODO ideally the <A HREF="../../voldemort/routing/RoutingStrategy.html" title="interface in voldemort.routing"><CODE>RoutingStrategy</CODE></A> should house a routeRequest(int
 partition) method
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>partitionId</CODE> - 
<DT><B>Returns:</B><DD>list of node ids
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../voldemort/VoldemortException.html" title="class in voldemort">VoldemortException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getZoneNAryPartitionIds(int)"><!-- --></A><H3>
getZoneNAryPartitionIds</H3>
<PRE>
public java.util.List&lt;java.lang.Integer&gt; <B>getZoneNAryPartitionIds</B>(int&nbsp;nodeId)</PRE>
<DL>
<DD>Returns all (zone n-ary) partition IDs hosted on the node.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>nodeId</CODE> - 
<DT><B>Returns:</B><DD>all zone n-ary partition IDs hosted on the node in an unordered
         list.</DL>
</DD>
</DL>
<HR>

<A NAME="getZonePrimaryPartitionIds(int)"><!-- --></A><H3>
getZonePrimaryPartitionIds</H3>
<PRE>
public java.util.List&lt;java.lang.Integer&gt; <B>getZonePrimaryPartitionIds</B>(int&nbsp;nodeId)</PRE>
<DL>
<DD>Returns all zone-primary partition IDs on node. A zone-primary means zone
 n-ary==0. Zone-primary nodes are generally pseudo-masters in the zone and
 receive get traffic for some partition Id.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>nodeId</CODE> - 
<DT><B>Returns:</B><DD>all primary partition IDs (zone n-ary == 0) hosted on the node.</DL>
</DD>
</DL>
<HR>

<A NAME="zoneNAryExists(int, int, int)"><!-- --></A><H3>
zoneNAryExists</H3>
<PRE>
public boolean <B>zoneNAryExists</B>(int&nbsp;zoneId,
                              int&nbsp;zoneNAry,
                              int&nbsp;partitionId)</PRE>
<DL>
<DD>checks if zone has a zone n-ary for partition Id. False should only be
 returned in zone expansion use cases.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>zoneId</CODE> - <DD><CODE>zoneNAry</CODE> - zone n-ary replica to confirm<DD><CODE>partitionId</CODE> - 
<DT><B>Returns:</B><DD>true iff partitionId has zone-nary replica in zone id .</DL>
</DD>
</DL>
<HR>

<A NAME="getZoneNaryForNodesPartition(int, int, int)"><!-- --></A><H3>
getZoneNaryForNodesPartition</H3>
<PRE>
public int <B>getZoneNaryForNodesPartition</B>(int&nbsp;zoneId,
                                        int&nbsp;nodeId,
                                        int&nbsp;partitionId)</PRE>
<DL>
<DD>Determines the zone n-ary replica level of the specified partitionId on
 the node id in zone id.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>zoneId</CODE> - <DD><CODE>nodeId</CODE> - <DD><CODE>partitionId</CODE> - 
<DT><B>Returns:</B><DD>zone n-ary replica level of the partition id on the node id in
         the zone id (primary == 0, secondary == 1, ...)</DL>
</DD>
</DL>
<HR>

<A NAME="checkKeyBelongsToNode(byte[], int)"><!-- --></A><H3>
checkKeyBelongsToNode</H3>
<PRE>
public boolean <B>checkKeyBelongsToNode</B>(byte[]&nbsp;key,
                                     int&nbsp;nodeId)</PRE>
<DL>
<DD>Determines if the key replicates to the given node
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - <DD><CODE>nodeId</CODE> - 
<DT><B>Returns:</B><DD>true if the key belongs to the node as some replica</DL>
</DD>
</DL>
<HR>

<A NAME="checkKeyBelongsToPartition(java.util.List, java.util.List, java.util.HashMap)"><!-- --></A><H3>
checkKeyBelongsToPartition</H3>
<PRE>
public static boolean <B>checkKeyBelongsToPartition</B>(java.util.List&lt;java.lang.Integer&gt;&nbsp;keyPartitions,
                                                 java.util.List&lt;java.lang.Integer&gt;&nbsp;nodePartitions,
                                                 java.util.HashMap&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;&nbsp;replicaToPartitionList)</PRE>
<DL>
<DD>Check that the key belongs to one of the partitions in the map of replica
 type to partitions
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>keyPartitions</CODE> - Preference list of the key<DD><CODE>nodePartitions</CODE> - Partition list on this node<DD><CODE>replicaToPartitionList</CODE> - Mapping of replica type to partition list
<DT><B>Returns:</B><DD>Returns a boolean to indicate if this belongs to the map</DL>
</DD>
</DL>
<HR>

<A NAME="checkKeyBelongsToPartition(int, byte[], java.util.HashMap, voldemort.cluster.Cluster, voldemort.store.StoreDefinition)"><!-- --></A><H3>
checkKeyBelongsToPartition</H3>
<PRE>
public static boolean <B>checkKeyBelongsToPartition</B>(int&nbsp;nodeId,
                                                 byte[]&nbsp;key,
                                                 java.util.HashMap&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;&nbsp;replicaToPartitionList,
                                                 <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                                 <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDef)</PRE>
<DL>
<DD>Check that the key belongs to one of the partitions in the map of replica
 type to partitions
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>nodeId</CODE> - Node on which this is running ( generally stealer node )<DD><CODE>key</CODE> - The key to check<DD><CODE>replicaToPartitionList</CODE> - Mapping of replica type to partition list<DD><CODE>cluster</CODE> - Cluster metadata<DD><CODE>storeDef</CODE> - The store definition
<DT><B>Returns:</B><DD>Returns a boolean to indicate if this belongs to the map</DL>
</DD>
</DL>
<HR>

<A NAME="checkKeyBelongsToPartition(byte[], java.util.Set, voldemort.cluster.Cluster, voldemort.store.StoreDefinition)"><!-- --></A><H3>
checkKeyBelongsToPartition</H3>
<PRE>
public static java.util.List&lt;java.lang.Integer&gt; <B>checkKeyBelongsToPartition</B>(byte[]&nbsp;key,
                                                                           java.util.Set&lt;<A HREF="../../voldemort/utils/Pair.html" title="class in voldemort.utils">Pair</A>&lt;java.lang.Integer,java.util.HashMap&lt;java.lang.Integer,java.util.List&lt;java.lang.Integer&gt;&gt;&gt;&gt;&nbsp;stealerNodeToMappingTuples,
                                                                           <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                                                           <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDef)</PRE>
<DL>
<DD>Given a key and a list of steal infos give back a list of stealer node
 ids which will steal this.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - Byte array of key<DD><CODE>stealerNodeToMappingTuples</CODE> - Pairs of stealer node id to their
        corresponding [ partition - replica ] tuples<DD><CODE>cluster</CODE> - Cluster metadata<DD><CODE>storeDef</CODE> - Store definitions
<DT><B>Returns:</B><DD>List of node ids</DL>
</DD>
</DL>
<HR>

<A NAME="checkPartitionBelongsToNode(int, int, voldemort.cluster.Cluster, voldemort.store.StoreDefinition)"><!-- --></A><H3>
checkPartitionBelongsToNode</H3>
<PRE>
public static boolean <B>checkPartitionBelongsToNode</B>(int&nbsp;partition,
                                                  int&nbsp;nodeId,
                                                  <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                                  <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDef)</PRE>
<DL>
<DD>Checks if a given partition is stored in the node.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>partition</CODE> - <DD><CODE>nodeId</CODE> - <DD><CODE>cluster</CODE> - <DD><CODE>storeDef</CODE> - 
<DT><B>Returns:</B><DD>true if partition belongs to node for given store</DL>
</DD>
</DL>
<HR>

<A NAME="checkKeyBelongsToNode(byte[], int, voldemort.cluster.Cluster, voldemort.store.StoreDefinition)"><!-- --></A><H3>
checkKeyBelongsToNode</H3>
<PRE>
public static boolean <B>checkKeyBelongsToNode</B>(byte[]&nbsp;key,
                                            int&nbsp;nodeId,
                                            <A HREF="../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                            <A HREF="../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&nbsp;storeDef)</PRE>
<DL>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - <DD><CODE>nodeId</CODE> - <DD><CODE>cluster</CODE> - <DD><CODE>storeDef</CODE> - 
<DT><B>Returns:</B><DD>true if the key belongs to the node as some replica</DL>
</DD>
</DL>
<HR>

<A NAME="getNodeIdForZoneNary(int, int, int)"><!-- --></A><H3>
getNodeIdForZoneNary</H3>
<PRE>
public int <B>getNodeIdForZoneNary</B>(int&nbsp;zoneId,
                                int&nbsp;zoneNary,
                                int&nbsp;partitionId)</PRE>
<DL>
<DD>Determines which node hosts partition id with specified n-ary level in
 specified zone.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>zoneId</CODE> - <DD><CODE>zoneNary</CODE> - <DD><CODE>partitionId</CODE> - 
<DT><B>Returns:</B><DD>node ID that hosts zone n-ary replica of partition.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/StoreRoutingPlan.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../voldemort/routing/RoutingStrategyType.html" title="class in voldemort.routing"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../voldemort/routing/ZoneRoutingStrategy.html" title="class in voldemort.routing"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?voldemort/routing/StoreRoutingPlan.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="StoreRoutingPlan.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Jay Kreps, Roshan Sumbaly, Alex Feinberg, Bhupesh Bansal, Lei Gao, Chinmay Soman, Vinoth Chandar, Zhongjie Wu
</BODY>
</HTML>
